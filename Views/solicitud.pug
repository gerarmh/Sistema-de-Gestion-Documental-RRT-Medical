doctype html
html
    head
        meta(charset="utf-8")
        meta(http-equiv="X-UA-Compatible" content="IE=edge")
        meta(name="viewport" content="width=device-width, initial-scale=1.0")
        title="Solicitud"
        link(rel="shortcut icon", href="../views/images/pestaña.png")
        link(rel="stylesheet", type="text/css", href="../views/styles/style.css")
        <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,200;0,400;0,500;0,600;1,200&display=swap" rel="stylesheet">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,200;0,400;0,500;0,600;1,200&family=Nunito:wght@900&display=swap" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
        script(src="../views/gen-pdf/jspdf.min.js")
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
        //script(src="../views/gen-pdf/gen-pdf.js")
        script(src="https://code.jquery.com/jquery-1.12.4.min.js")
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    body
        //----NAV BAR ----- 
        include nav.html
        header(class="admin-header")
            div(class="container")
                div(class="row")
                    div(class="col-md-8 offset-md-2")
                        h3 Formato de Control de Cambios
                        hr
                        form(id="form")
                            div(class="row mb-3")
                                div(class="col-md-9" id="divnombre")
                                div(class="col-md-3")
                                    label(for="folio", class="form-label") Folio no.
                                    hr
                                    input(type="text", class="form-control" id="folio" maxlength="10")
                            div(class="mb-3")
                                label(for="area", class="form-label") Area
                                br
                                select(name="area", id="area")
                                    option(value="Asuntos Regulatorios") Asuntos Regulatorios
                            div(class="row mb-3")
                                div(class="col-md-6")
                                    label(for="fechasoli", class="form-label") Fecha de solicitud
                                    input(type="date", class="form-control" id="fechasoli" required)
                                div(class="col-md-6")
                                    label(for="fechaefec", class="form-label") Fecha de efectividad
                                    input(type="date", class="form-control" id="fechaefec" required)
                            div(class="mb-3")
                                label(for="razon", class="form-label") Razon del cambio (Maximo 220 caracteres)
                                hr
                                textarea(class="form-control" id="razon" maxlength="220" required)
                            div(class="row-mb-3")
                                div
                                    label(for="", class="form-label") Alcance de cambio:
                                    br
                                    div(class="form-check form-check-inline")
                                        input(type="checkbox", name="alcance", class="form-check-input" id="procesos" value="1")
                                        label(for="procesos", class="form-check-label") Procesos
                                        
                                    div(class="form-check form-check-inline")
                                        input(type="checkbox", name="alcance", class="form-check-input" id="proveedores" value="2")
                                        label(for="proveedores", class="form-check-label") Proveedores

                                    div(class="form-check form-check-inline")
                                        input(type="checkbox", name="alcance", class="form-check-input" id="siscriticos" value="3")
                                        label(for="siscriticos", class="form-check-label") Sistemas Críticos

                                    div(class="form-check form-check-inline")
                                        input(type="checkbox", name="alcance", class="form-check-input" id="siscomputacionales" value="4")
                                        label(for="siscomputacionales", class="form-check-label") Sistemas Computacionales

                                    div(class="form-check form-check-inline")
                                        input(type="checkbox", name="alcance", class="form-check-input" id="areas" value="5")
                                        label(for="areas", class="form-check-label") Áreas

                                    div(class="form-check form-check-inline")
                                        input(type="checkbox", name="alcance", class="form-check-input" id="servicios" value="6")
                                        label(for="servicios", class="form-check-label") Servicios

                                    div(class="form-check form-check-inline")
                                        input(type="checkbox", name="alcance", class="form-check-input" id="equipos" value="7")
                                        label(for="equipos", class="form-check-label") Equipos

                                    div(class="form-check form-check-inline")
                                        input(type="checkbox", name="alcance", class="form-check-input" id="metanaliticos" value="8")
                                        label(for="metanaliticos", class="form-check-label") Metodos Analíticos

                                    div(class="form-check form-check-inline")
                                        input(type="checkbox", name="alcance", class="form-check-input" id="especificaciones" value="9")
                                        label(for="especificaciones", class="form-check-label") Especificaciones

                                    div(class="form-check form-check-inline")
                                        input(type="checkbox", name="alcance", class="form-check-input" id="documentacion" value="10")
                                        label(for="documentacion", class="form-check-label") Documentación

                                    div(class="form-check form-check-inline")
                                        input(type="checkbox", name="alcance", class="form-check-input" id="dispregulatorias" value="11")
                                        label(for="dispregulatorias", class="form-check-label") Disposiciones Regulatorias
                                        
                                    div(class="form-check form-check-inline")
                                        input(type="checkbox", name="alcance", class="form-check-input" id="calidproduct" value="12")
                                        label(for="calidproduct", class="form-check-label") Calidad del Producto
                            hr(id="alcance")
                            div(class="row mb-3")
                                div(class="col-md-12")
                                    div
                                        label(for="cambiode", class="form-label") Cambio de (Maximo 160 caracteres):
                                        textarea(type="text", class="form-control" id="cambiode" maxlength="160" required)
                            div(class="row mb-3")
                                div(class="col-md-12")
                                    div
                                        label(for="cambioa", class="form-label") Cambio a (Maximo 200 caracteres):
                                        textarea(type="text", class="form-control" id="cambioa" maxlength="200" required)
                            div(class="row mb-3")
                                div(class="col-md-12")
                                    div
                                        label(for="anexo", class="form-label") Anexo (Solo archivos PDF):
                                        input(type="file", class="form-control" id="anexo", multiple="false", accept="application/pdf")
                            
                            div(class="row mb-3")
                                label(class="form-label") Recursos Humanos
                                hr
                                div(class="col-md-3")
                                    div
                                        label(for="", class="form-label") a) Capacitación
                                        br 
                                        div(class="form-check form-check-inline")
                                            input(type="radio", name="capacitacion", class="form-check-input", id="capacitacionsi", value="1")
                                            label(for="capacitacionsi" class="form-check-label") Si
                                div(class="col-md-6")
                                    div
                                        hr
                                        input(type="text", class="form-control", id="capacitaciondesc" maxlength="40")
                                div(class="col-md-3")
                                    div
                                        div(class="form-check form-check-inline")
                                            hr
                                            input(type="radio", name="capacitacion", class="form-check-input", id="capacitacionno", value="0" checked)
                                            label(for="capacitacionno", class="form-check-label") No
                            div(class="row mb-3")
                                div(class="col-md-3")
                                    div
                                        label(for="", class="form-label") b) Evaluación
                                        br 
                                        div(class="form-check form-check-inline")
                                            input(type="radio", name="evaluacion", class="form-check-input", id="evaluacionsi", value="1")
                                            label(for="evaluacionsi" class="form-check-label") Si
                                div(class="col-md-6")
                                    div
                                        hr
                                        input(type="text", class="form-control", id="evaluaciondesc" maxlength="40")
                                div(class="col-md-3")
                                        div(class="form-check form-check-inline")
                                            hr
                                            input(type="radio", name="evaluacion", class="form-check-input", id="evaluacionno", value="0" checked)
                                            label(for="evaluacionno", class="form-check-label") No
                            div(class="row mb-3")
                                label(for="porqueno", class="form-label") ¿Por qué no? a/b (100 caracteres)
                                textarea(type="text", class="form-control" id="porqueno" maxlength="100" required)
                            div(class="row mb-3")
                                div(class="col-md-6")
                                    div
                                        label(for="", class="form-label") Requerimiento de Calificación/Validación:
                                        br
                                        div(class="form-check form-check-inline")
                                            input(type="radio", name="reqcalificacion", class="form-check-input", id="reqsi", value="1")
                                            label(for="reqsi", class="form-check-label") Si
                                        div(class="form-check form-check-inline")
                                            input(type="radio", name="reqcalificacion", class="form-check-input", id="reqno", value="0" checked)
                                            label(for="reqno", class="form-check-label") No
                                div(class="col-md-6")
                                    div
                                        label(for="nocalificacion", class="form-label") No. Calificación/Validación:
                                        input(type="text", class="form-control", id="nocalificacion" maxlength="10" required)
                            div(class="row-mb-3")
                                div(cass="col-md-9")
                                    div
                                        label(for="resultado", class="form-label") Actividades por realizar/Resultados esperados (Maximo 240 caracteres):
                                        textarea(type="text", class="form-control", id="resultado" maxlength="240" required)
                            br
                            div(class="row-mb-3")
                                div(cass="col-md-9")
                                    div
                                        label(for="pruebas", class="form-label") Pruebas requeridas (referencia al protocolo de las pruebas) 66 caracteres:
                                        hr
                                        textarea(type="text", class="form-control", id="pruebas" maxlength="66" required)
                            br
                            
                            div(class="row mb-3")
                                div(class="col-mb-9")
                                    label(for="responsable", class="form-label") Responsable de realizar la modificación
                                    hr
                                    input(type="text", class="form-control" id="responsable" maxlength="55" required)
                            div(class="row mb-3")
                                div(class="col-md-6")
                                    label(for="fechainicio", class="form-label") Fecha de inicio
                                    input(type="date", class="form-control" id="fechainicio" required)
                                div(class="col-md-6")
                                    label(for="fechatermino", class="form-label") Fecha de termino
                                    input(type="date", class="form-control" id="fechatermino" required)
                            button(type="submit",class="btn btn-primary pb-4", style="background-color: #3B3332; border: none") Enviar
                            br
                            h3(style="text-align: right; font-size:15px;") QA 03.14

        include footer.html
        script(src="./controllers/controladorSesiones.js")
        script(src="./controllers/controladorRSolicitudes.js")
        script. 
            const menuBtn = document.querySelector('.menu-btn')
            const navlinks = document.querySelector('.nav-links')
            menuBtn.addEventListener('click', () => {
                navlinks.classList.toggle('mobile-menu')
            })   
        script(type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js")
        script(nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js")
        script.
            // Obtener la fecha actual
            var fecha = new Date();

            // Formatear la fecha como una cadena en el formato YYYY-MM-DD
            var fechaFormateada = fecha.getFullYear() + '-' + ('0' + (fecha.getMonth()+1)).slice(-2) + '-' + ('0' + fecha.getDate()).slice(-2);

            // Establecer la fecha actual como valor predeterminado en el elemento de entrada de fecha
            document.getElementById('fechasoli').value = fechaFormateada;
            document.getElementById('fechaefec').min= fechaFormateada;
            document.getElementById('fechainicio').value = fechaFormateada;
            document.getElementById('fechatermino').min = fechaFormateada;